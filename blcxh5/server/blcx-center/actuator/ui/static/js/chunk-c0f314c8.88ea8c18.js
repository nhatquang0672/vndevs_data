(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c0f314c8"],{"17aa":function(t,e,n){"use strict";n("ef4d")},6085:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"d",(function(){return r})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return h}));n("d3b7"),n("e9c4"),n("b64b"),n("159b");var i=n("4360"),s=n("5c96"),a=18e5,l="x-session";function o(){var t=i["a"].getters.lastActiveTime,e=(new Date).getTime(),n=e-t>a;return n&&s["MessageBox"].alert("会话过期,请重新登录","Confirm logout",{confirmButtonText:"重新登录",type:"warning",showClose:!1}).then((function(){i["a"].dispatch("user/resetToken").then((function(){location.reload()}))})),n}function r(){return new Promise((function(t,e){e("会话过期,请重新登录")}))}function c(t){t.headers[l]=JSON.stringify({id:i["a"].getters.id,time:i["a"].getters.time,token:i["a"].getters.token,roles:[]})}function h(){return JSON.stringify({id:i["a"].getters.id,time:i["a"].getters.time,token:i["a"].getters.token,roles:[]})}},6724:function(t,e,n){"use strict";n("8d41");var i="@@wavesContext";function s(t,e){function n(n){var i=Object.assign({},e.value),s=Object.assign({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},i),a=s.ele;if(a){a.style.position="relative",a.style.overflow="hidden";var l=a.getBoundingClientRect(),o=a.querySelector(".waves-ripple");switch(o?o.className="waves-ripple":(o=document.createElement("span"),o.className="waves-ripple",o.style.height=o.style.width=Math.max(l.width,l.height)+"px",a.appendChild(o)),s.type){case"center":o.style.top=l.height/2-o.offsetHeight/2+"px",o.style.left=l.width/2-o.offsetWidth/2+"px";break;default:o.style.top=(n.pageY-l.top-o.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",o.style.left=(n.pageX-l.left-o.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return o.style.backgroundColor=s.color,o.className="waves-ripple z-active",!1}}return t[i]?t[i].removeHandle=n:t[i]={removeHandle:n},n}var a={bind:function(t,e){t.addEventListener("click",s(t,e),!1)},update:function(t,e){t.removeEventListener("click",t[i].removeHandle,!1),t.addEventListener("click",s(t,e),!1)},unbind:function(t){t.removeEventListener("click",t[i].removeHandle,!1),t[i]=null,delete t[i]}},l=function(t){t.directive("waves",a)};window.Vue&&(window.waves=a,Vue.use(l)),a.install=l;e["a"]=a},"8d41":function(t,e,n){},c5bc:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dashboard-editor-container"},[n("div",{staticClass:"filter-container"},[n("el-select",{staticClass:"filter-item",staticStyle:{"margin-right":"25px"},attrs:{multiple:"",placeholder:"选择 渠道"},on:{change:t.selectChannels},model:{value:t.selectedChannels,callback:function(e){t.selectedChannels=e},expression:"selectedChannels"}},t._l(t.channels,(function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})})),1),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:t.getHosts}},[t._v("刷新")]),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-files"},on:{click:function(e){t.channelListDialogVisible=!0}}},[t._v("渠道管理")]),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-files"},on:{click:function(e){t.hostAddDialogVisible=!0}}},[t._v("新增主机")])],1),n("el-table",{ref:"mainTable",staticStyle:{width:"100%"},attrs:{data:t.hosts,stripe:""}},[n("el-table-column",{attrs:{align:"center",prop:"host",label:"主机"}}),n("el-table-column",{attrs:{align:"center",prop:"description",label:"描述"}}),n("el-table-column",{attrs:{align:"center",prop:"channels",label:"渠道"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return t._l(i.channels,(function(e){return n("el-tag",{key:e},[t._v(t._s(e))])}))}}])}),n("el-table-column",{attrs:{align:"center",prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[i.restartTime>0?n("el-tag",{attrs:{type:"warning"}},[t._v("重启中")]):i.shutdownTime>0?n("el-tag",{attrs:{type:"danger"}},[t._v("关闭中")]):i.pid>0?n("el-tag",{attrs:{type:"success"}},[t._v("运行")]):n("el-tag",{attrs:{type:"info"}},[t._v("关闭")])]}}])}),n("el-table-column",{attrs:{align:"center",label:"操作",width:"500"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.showUpdateHostDialog(i)}}},[t._v("修改")]),n("el-button",{attrs:{type:"warning",disabled:""}},[t._v("日志")])]}}])})],1),n("el-dialog",{attrs:{visible:t.hostAddDialogVisible,"close-on-click-modal":!1,width:"60%","append-to-body":""},on:{"update:visible":function(e){t.hostAddDialogVisible=e}}},[n("div",[n("el-form",{ref:"form",attrs:{model:t.host,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"主机"}},[n("el-input",{staticStyle:{width:"256px"},model:{value:t.host.host,callback:function(e){t.$set(t.host,"host",e)},expression:"host.host"}})],1),n("el-form-item",{attrs:{label:"渠道"}},[n("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:t.host.channels,callback:function(e){t.$set(t.host,"channels",e)},expression:"host.channels"}},t._l(t.channels,(function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),n("el-form-item",{attrs:{label:"描述"}},[n("el-input",{staticStyle:{width:"256px"},model:{value:t.host.description,callback:function(e){t.$set(t.host,"description",e)},expression:"host.description"}})],1)],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.hostAddDialogVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.hostAddSubmit}},[t._v("确 定")])],1)]),n("el-dialog",{attrs:{visible:t.hostEditDialogVisible,"close-on-click-modal":!1,width:"80%"},on:{"update:visible":function(e){t.hostEditDialogVisible=e}}},[n("div",[n("el-form",{ref:"form",attrs:{model:t.host,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"主机"}},[n("el-input",{staticStyle:{width:"256px"},model:{value:t.host.host,callback:function(e){t.$set(t.host,"host",e)},expression:"host.host"}})],1),n("el-form-item",{attrs:{label:"渠道"}},[n("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:t.host.channels,callback:function(e){t.$set(t.host,"channels",e)},expression:"host.channels"}},t._l(t.channels,(function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),n("el-form-item",{attrs:{label:"描述"}},[n("el-input",{staticStyle:{width:"256px"},model:{value:t.host.description,callback:function(e){t.$set(t.host,"description",e)},expression:"host.description"}})],1)],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.hostEditDialogVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.hostUpdateSubmit}},[t._v("确 定")])],1)]),n("el-dialog",{attrs:{title:"渠道",visible:t.channelListDialogVisible,"close-on-click-modal":!1,width:"80%"},on:{"update:visible":function(e){t.channelListDialogVisible=e}}},[n("div",[n("div",{staticClass:"filter-container"},[n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"25px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.showAddChannelDialog}},[t._v("新增渠道")])],1),n("el-table",{ref:"mainTable2",staticStyle:{width:"100%"},attrs:{data:t.channels,stripe:""}},[n("el-table-column",{attrs:{align:"center",prop:"name",label:"渠道"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(t._s(n))]}}])}),n("el-table-column",{attrs:{align:"center",label:"操作",width:"500"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.showUpdateChannelDialog(i)}}},[t._v("修改")]),n("el-button",{attrs:{type:"warning"},on:{click:function(e){return t.channelRemove(i)}}},[t._v("删除")])]}}])})],1)],1)]),n("el-dialog",{attrs:{visible:t.channelEditDialogVisible,"close-on-click-modal":!1,width:"60%","append-to-body":""},on:{"update:visible":function(e){t.channelEditDialogVisible=e}}},[n("div",[n("el-form",{ref:"form",attrs:{"label-width":"80px"}},[n("el-form-item",{attrs:{label:"渠道"}},[n("el-input",{staticStyle:{width:"256px"},model:{value:t.channelEdit.newChannel,callback:function(e){t.$set(t.channelEdit,"newChannel",e)},expression:"channelEdit.newChannel"}})],1)],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.channelEditDialogVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.channelSubmit}},[t._v("确 定")])],1)])],1)},s=[],a=(n("d3b7"),n("159b"),n("498a"),n("a4d3"),n("e01a"),n("6724")),l=n("e0ac"),o={name:"Host",directives:{waves:a["a"]},components:{},data:function(){return{hosts:[],allHosts:[],channels:[],selectedChannels:[],channelEdit:{type:null,channel:null,newChannel:null},host:{host:null,channels:[],description:null},hostEditDialogVisible:!1,channelListDialogVisible:!1,channelEditDialogVisible:!1,hostAddDialogVisible:!1}},created:function(){this.getChannels(),this.getHosts()},methods:{getChannels:function(){var t=this;Object(l["g"])("channel/list").then((function(e){t.channels=e}))},getHosts:function(){var t=this;this.selectedChannels=[],Object(l["g"])("host/list").then((function(e){var n=[];e.forEach((function(e){t.hostValue(e),n.push(e)})),t.hosts=n,t.allHosts=n}))},selectChannels:function(){var t=this;if(0===this.selectedChannels.length)this.hosts=this.allHosts;else{var e=[];this.allHosts.forEach((function(n){for(var i=0,s=n.channels.length;i<s;i++){for(var a=!1,l=0,o=t.selectedChannels.length;l<o;l++)if(n.channels[i]===t.selectedChannels[l]){e.push(n),a=!0;break}if(a)break}})),this.hosts=e}},hostValue:function(t){t.channels=t.channels?t.channels:[],t["shutdownTime"]=0,t["restartTime"]=0},showUpdateChannelDialog:function(t){this.channelEdit.channel=t,this.channelEdit.newChannel=t,this.channelEdit.type="update",this.channelEditDialogVisible=!0},showAddChannelDialog:function(){this.channelEdit.channel=null,this.channelEdit.newChannel=null,this.channelEdit.type="add",this.channelEditDialogVisible=!0},channelSubmit:function(){var t=this;if(this.channelEdit.newChannel&&0!==this.channelEdit.newChannel.trim().length)if("add"===this.channelEdit.type)Object(l["g"])("channel/add",this.channelEdit.newChannel.trim()).then((function(e){e&&(t.getChannels(),t.channelEditDialogVisible=!1)}));else{if(this.channelEdit.channel===this.channelEdit.newChannel)return void this.$message.warning("没任何修改");Object(l["g"])("channel/update",{channel:this.channelEdit.channel,newChannel:this.channelEdit.newChannel}).then((function(e){e&&(t.getChannels(),t.channelEditDialogVisible=!1)}))}else this.$message.warning("请输入 渠道")},channelRemove:function(t){var e=this;this.$confirm("确定删除渠道 "+t+" ?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["g"])("channel/remove",t).then((function(t){t&&e.getChannels()}))}))},showUpdateHostDialog:function(t){this.host=t,this.hostEditDialogVisible=!0},hostAddSubmit:function(){var t=this;this.host.host&&0!==this.host.host.trim().length?this.host.channels&&0!==this.host.channels.length?(this.host.host=this.host.host.trim(),this.host.description=this.host.description?this.host.description:"",Object(l["g"])("host/add",{host:this.host.host,channels:this.host.channels,description:this.host.description}).then((function(e){e&&(t.getHosts(),t.hostAddDialogVisible=!1)}))):this.$message.warning("请选择 渠道"):this.$message.warning("请输入 主机")},hostUpdateSubmit:function(){var t=this;this.host.host&&0!==this.host.host.trim().length?this.host.channels&&0!==this.host.channels.length?(this.host.host=this.host.host.trim(),this.host.description=this.host.description?this.host.description:"",Object(l["g"])("host/update",{host:this.host.host,channels:this.host.channels,description:this.host.description}).then((function(e){e&&(t.getHosts(),t.hostEditDialogVisible=!1)}))):this.$message.warning("请选择 渠道"):this.$message.warning("请输入 主机")}}},r=o,c=(n("17aa"),n("2877")),h=Object(c["a"])(r,i,s,!1,null,"5f1a6d05",null);e["default"]=h.exports},e0ac:function(t,e,n){"use strict";n.d(e,"g",(function(){return h})),n.d(e,"d",(function(){return u})),n.d(e,"f",(function(){return d})),n.d(e,"e",(function(){return f})),n.d(e,"c",(function(){return p})),n.d(e,"b",(function(){return m})),n.d(e,"a",(function(){return g}));n("d3b7");var i=n("bc3a"),s=n.n(i),a=n("5c96"),l=n("4360"),o=n("5f87"),r=n("6085"),c=s.a.create({baseURL:"http://127.0.0.1:9503/actuator/",timeout:5e3});function h(t,e){return Object(r["b"])()?Object(r["d"])():new Promise((function(n,i){c({url:t,method:"POST",data:e}).then((function(t){l["a"].dispatch("user/active",l["a"].getters.token),n(t)})).catch((function(t){i(t)}))}))}function u(){return"http://127.0.0.1:9503/actuator/hotUpdate/upload"}function d(){return"http://127.0.0.1:9503/actuator/version/upload"}function f(){return"http://127.0.0.1:9503/actuator/resource/version"}function p(){return"http://127.0.0.1:9503/actuator/deployment/templateUpload"}function m(){return"http://127.0.0.1:9503/actuator/resource/deployment"}function g(){return"http://127.0.0.1:9503/actuator/client/upload"}c.interceptors.request.use((function(t){return l["a"].getters.token&&(t.headers["X-Token"]=Object(o["a"])()),Object(r["c"])(t),t}),(function(t){return console.log(t),Promise.reject(t)})),c.interceptors.response.use((function(t){var e=t.data;return e.result||null===e.content?e.content:("string"===typeof e&&(e=JSON.parse(e)),Object(a["Message"])({message:e.content||"Error",type:"error",duration:5e3}),Promise.reject(new Error(e.content||"Error")))}),(function(t){return console.log("err"+t),Object(a["Message"])({message:t.message,type:"error",duration:5e3}),Promise.reject(t)}))},e9c4:function(t,e,n){var i=n("23e7"),s=n("d066"),a=n("d039"),l=s("JSON","stringify"),o=/[\uD800-\uDFFF]/g,r=/^[\uD800-\uDBFF]$/,c=/^[\uDC00-\uDFFF]$/,h=function(t,e,n){var i=n.charAt(e-1),s=n.charAt(e+1);return r.test(t)&&!c.test(s)||c.test(t)&&!r.test(i)?"\\u"+t.charCodeAt(0).toString(16):t},u=a((function(){return'"\\udf06\\ud834"'!==l("\udf06\ud834")||'"\\udead"'!==l("\udead")}));l&&i({target:"JSON",stat:!0,forced:u},{stringify:function(t,e,n){var i=l.apply(null,arguments);return"string"==typeof i?i.replace(o,h):i}})},ef4d:function(t,e,n){}}]);