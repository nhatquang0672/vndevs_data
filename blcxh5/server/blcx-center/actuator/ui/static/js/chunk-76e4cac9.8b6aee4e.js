(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76e4cac9"],{2127:function(t,e,r){"use strict";r("8133")},6085:function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"d",(function(){return l})),r.d(e,"c",(function(){return u})),r.d(e,"a",(function(){return c}));r("d3b7"),r("e9c4"),r("b64b"),r("159b");var a=r("4360"),n=r("5c96"),o=18e5,s="x-session";function i(){var t=a["a"].getters.lastActiveTime,e=(new Date).getTime(),r=e-t>o;return r&&n["MessageBox"].alert("会话过期,请重新登录","Confirm logout",{confirmButtonText:"重新登录",type:"warning",showClose:!1}).then((function(){a["a"].dispatch("user/resetToken").then((function(){location.reload()}))})),r}function l(){return new Promise((function(t,e){e("会话过期,请重新登录")}))}function u(t){t.headers[s]=JSON.stringify({id:a["a"].getters.id,time:a["a"].getters.time,token:a["a"].getters.token,roles:[]})}function c(){return JSON.stringify({id:a["a"].getters.id,time:a["a"].getters.time,token:a["a"].getters.token,roles:[]})}},6724:function(t,e,r){"use strict";r("8d41");var a="@@wavesContext";function n(t,e){function r(r){var a=Object.assign({},e.value),n=Object.assign({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},a),o=n.ele;if(o){o.style.position="relative",o.style.overflow="hidden";var s=o.getBoundingClientRect(),i=o.querySelector(".waves-ripple");switch(i?i.className="waves-ripple":(i=document.createElement("span"),i.className="waves-ripple",i.style.height=i.style.width=Math.max(s.width,s.height)+"px",o.appendChild(i)),n.type){case"center":i.style.top=s.height/2-i.offsetHeight/2+"px",i.style.left=s.width/2-i.offsetWidth/2+"px";break;default:i.style.top=(r.pageY-s.top-i.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",i.style.left=(r.pageX-s.left-i.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return i.style.backgroundColor=n.color,i.className="waves-ripple z-active",!1}}return t[a]?t[a].removeHandle=r:t[a]={removeHandle:r},r}var o={bind:function(t,e){t.addEventListener("click",n(t,e),!1)},update:function(t,e){t.removeEventListener("click",t[a].removeHandle,!1),t.addEventListener("click",n(t,e),!1)},unbind:function(t){t.removeEventListener("click",t[a].removeHandle,!1),t[a]=null,delete t[a]}},s=function(t){t.directive("waves",o)};window.Vue&&(window.waves=o,Vue.use(s)),o.install=s;e["a"]=o},8133:function(t,e,r){},"8d41":function(t,e,r){},e0ac:function(t,e,r){"use strict";r.d(e,"g",(function(){return c})),r.d(e,"d",(function(){return m})),r.d(e,"f",(function(){return p})),r.d(e,"e",(function(){return f})),r.d(e,"c",(function(){return d})),r.d(e,"b",(function(){return h})),r.d(e,"a",(function(){return v}));r("d3b7");var a=r("bc3a"),n=r.n(a),o=r("5c96"),s=r("4360"),i=r("5f87"),l=r("6085"),u=n.a.create({baseURL:"http://127.0.0.1:9503/actuator/",timeout:5e3});function c(t,e){return Object(l["b"])()?Object(l["d"])():new Promise((function(r,a){u({url:t,method:"POST",data:e}).then((function(t){s["a"].dispatch("user/active",s["a"].getters.token),r(t)})).catch((function(t){a(t)}))}))}function m(){return"http://127.0.0.1:9503/actuator/hotUpdate/upload"}function p(){return"http://127.0.0.1:9503/actuator/version/upload"}function f(){return"http://127.0.0.1:9503/actuator/resource/version"}function d(){return"http://127.0.0.1:9503/actuator/deployment/templateUpload"}function h(){return"http://127.0.0.1:9503/actuator/resource/deployment"}function v(){return"http://127.0.0.1:9503/actuator/client/upload"}u.interceptors.request.use((function(t){return s["a"].getters.token&&(t.headers["X-Token"]=Object(i["a"])()),Object(l["c"])(t),t}),(function(t){return console.log(t),Promise.reject(t)})),u.interceptors.response.use((function(t){var e=t.data;return e.result||null===e.content?e.content:("string"===typeof e&&(e=JSON.parse(e)),Object(o["Message"])({message:e.content||"Error",type:"error",duration:5e3}),Promise.reject(new Error(e.content||"Error")))}),(function(t){return console.log("err"+t),Object(o["Message"])({message:t.message,type:"error",duration:5e3}),Promise.reject(t)}))},e9c4:function(t,e,r){var a=r("23e7"),n=r("d066"),o=r("d039"),s=n("JSON","stringify"),i=/[\uD800-\uDFFF]/g,l=/^[\uD800-\uDBFF]$/,u=/^[\uDC00-\uDFFF]$/,c=function(t,e,r){var a=r.charAt(e-1),n=r.charAt(e+1);return l.test(t)&&!u.test(n)||u.test(t)&&!l.test(a)?"\\u"+t.charCodeAt(0).toString(16):t},m=o((function(){return'"\\udf06\\ud834"'!==s("\udf06\ud834")||'"\\udead"'!==s("\udead")}));s&&a({target:"JSON",stat:!0,forced:m},{stringify:function(t,e,r){var a=s.apply(null,arguments);return"string"==typeof a?a.replace(i,c):a}})},eb43:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"dashboard-editor-container"},[r("el-card",{staticClass:"box-card"},[r("el-form",{staticClass:"demo-ruleForm",attrs:{model:t.formValues,rules:t.rules1,"label-width":"150px","status-icon":""}},[r("el-form-item",{attrs:{label:"服根路径",prop:"serverRootPath"}},[r("el-input",{staticStyle:{width:"512px"},on:{focus:function(e){return t.onfocus(t.formValues,"serverRootPath")},blur:function(e){return t.onblur("服根路径",t.formValues,"serverRootPath")}},model:{value:t.formValues.serverRootPath,callback:function(e){t.$set(t.formValues,"serverRootPath",e)},expression:"formValues.serverRootPath"}}),r("span",{staticClass:"demonstration",staticStyle:{"margin-left":"25px"}},[t._v("必须以/开头")])],1),r("el-form-item",{attrs:{label:"服目录格式",prop:"serverFormat"}},[r("el-input",{staticStyle:{width:"512px"},on:{focus:function(e){return t.onfocus(t.formValues,"serverFormat")},blur:function(e){return t.onblur("服目录格式",t.formValues,"serverFormat")}},model:{value:t.formValues.serverFormat,callback:function(e){t.$set(t.formValues,"serverFormat",e)},expression:"formValues.serverFormat"}}),r("span",{staticClass:"demonstration",staticStyle:{"margin-left":"25px"}},[t._v("必须含有${serverId}")])],1),r("el-form-item",{attrs:{label:"数据库连接",prop:"dbUri"}},[r("el-input",{staticStyle:{width:"512px"},on:{focus:function(e){return t.onfocus(t.formValues,"dbUri")},blur:function(e){return t.onblur("数据库连接",t.formValues,"dbUri")}},model:{value:t.formValues.dbUri,callback:function(e){t.$set(t.formValues,"dbUri",e)},expression:"formValues.dbUri"}}),r("span",{staticClass:"demonstration",staticStyle:{"margin-left":"25px"}},[t._v("格式：mysql://用户:密码@主机:端口[/数据库]")])],1)],1)],1),r("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"25px"}},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[t._v("Java启动参数")])]),r("el-form",{staticClass:"demo-ruleForm",attrs:{"label-width":"150px","status-icon":""}},[r("el-form-item",{attrs:{label:"Xms(启动内存)",prop:"Xms"}},[r("el-input-number",{attrs:{min:0,max:999999},on:{change:t.javaOptionsHandleChange},model:{value:t.formValues.javaOptions.Xms,callback:function(e){t.$set(t.formValues.javaOptions,"Xms",e)},expression:"formValues.javaOptions.Xms"}}),t._v("（单位M） ")],1),r("el-form-item",{attrs:{label:"Xmx(最大内存)",prop:"Xmx"}},[r("el-input-number",{attrs:{min:0,max:999999},on:{change:t.javaOptionsHandleChange},model:{value:t.formValues.javaOptions.Xmx,callback:function(e){t.$set(t.formValues.javaOptions,"Xmx",e)},expression:"formValues.javaOptions.Xmx"}}),t._v("（单位M） ")],1),r("el-form-item",{attrs:{label:"Xmn(新生代内存)",prop:"Xmn"}},[r("el-input-number",{attrs:{min:0,max:999999},on:{change:t.javaOptionsHandleChange},model:{value:t.formValues.javaOptions.Xmn,callback:function(e){t.$set(t.formValues.javaOptions,"Xmn",e)},expression:"formValues.javaOptions.Xmn"}}),t._v("（单位M） ")],1),r("el-form-item",{attrs:{label:"Xss(每线程内存)",prop:"Xss"}},[r("el-input-number",{attrs:{min:0,max:999999},on:{change:t.javaOptionsHandleChange},model:{value:t.formValues.javaOptions.Xss,callback:function(e){t.$set(t.formValues.javaOptions,"Xss",e)},expression:"formValues.javaOptions.Xss"}}),t._v("（单位M） ")],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",disabled:this.isChangeJavaOptions},on:{click:t.javaOptionsSubmit}},[t._v("保存")]),r("el-select",{staticStyle:{"margin-left":"100px",width:"120px"},attrs:{placeholder:"内存换算"},on:{change:t.memoryCompute},model:{value:t.memoryIndex,callback:function(e){t.memoryIndex=e},expression:"memoryIndex"}},t._l(10,(function(t){return r("el-option",{key:t,attrs:{label:t+"G",value:t}})})),1),t.memoryNumber>0?r("span",{staticStyle:{"margin-left":"20px","font-weight":"bold","font-size":"large"}},[t._v(t._s(t.memoryNumber)+" M")]):t._e()],1)],1)],1),r("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"25px"}},[r("el-form",{staticClass:"demo-ruleForm",attrs:{model:t.formValues,"label-width":"150px","status-icon":""}},[r("el-form-item",{attrs:{label:"开启白名单",prop:"isIpWhiteList"}},[r("el-switch",{on:{change:t.changeIsIpWhiteList},model:{value:t.formValues.isIpWhiteList,callback:function(e){t.$set(t.formValues,"isIpWhiteList",e)},expression:"formValues.isIpWhiteList"}})],1),r("el-form-item",{attrs:{label:"白名单",prop:"ipWhiteList"}},[t._l(t.formValues.ipWhiteList,(function(e,a){return r("el-tag",{key:a,attrs:{closable:""},on:{close:function(e){return t.handleTagClose(a)}}},[t._v(t._s(e))])})),r("el-button",{staticStyle:{"margin-left":"25px"},attrs:{icon:"el-icon-plus",circle:""},on:{click:function(e){t.dialogVisible=!0}}})],2)],1)],1),r("el-dialog",{attrs:{title:"添加白名单",visible:t.dialogVisible,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[r("div",[r("el-input",{model:{value:t.ip,callback:function(e){t.ip=e},expression:"ip"}})],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.addIpWhiteList}},[t._v("确 定")])],1)])],1)},n=[],o=(r("d3b7"),r("159b"),r("e9c4"),r("a434"),r("498a"),r("6724")),s=r("e0ac"),i={directives:{waves:o["a"]},components:{},data:function(){return{tempValue:null,formValues:{serverRootPath:null,serverFormat:null,isIpWhiteList:!1,ipWhiteList:[],dbUri:null,javaOptions:{Xmx:0,Xms:0,Xmn:0,Xss:0},db:{host:null,port:null,user:null,password:null},startupSh:null,shutdownSh:null},memoryIndex:null,memoryNumber:0,isChangeJavaOptions:!0,rules1:{serverRootPath:[{required:!0,message:"必须以/开头",trigger:"blur"}],serverFormat:[{required:!0,message:"必须含有${serverId}",trigger:"blur"}],dbUri:[{required:!0,message:"不能为空",trigger:"blur"}]},dialogVisible:!1,ip:null}},created:function(){this.getConfigs()},methods:{getConfigs:function(){var t=this;Object(s["g"])("configs",["serverRootPath","serverFormat","isIpWhiteList","ipWhiteList","javaOptions","dbUri"]).then((function(e){console.log(e),e.forEach((function(e){"serverRootPath"===e.key?t.formValues.serverRootPath=e.value:"serverFormat"===e.key?t.formValues.serverFormat=e.value:"isIpWhiteList"===e.key?t.formValues.isIpWhiteList=e.value:"ipWhiteList"===e.key?t.formValues.ipWhiteList=e.value?e.value:[]:"javaOptions"===e.key?t.formValues.javaOptions=e.value:"dbUri"===e.key&&(t.formValues.dbUri=e.value)}))}))},changeIsIpWhiteList:function(){this.update({key:"isIpWhiteList",value:this.formValues.isIpWhiteList}),this.ip=null},addIpWhiteList:function(){this.ip?(this.formValues.ipWhiteList.push(this.ip),this.update({key:"ipWhiteList",value:JSON.stringify(this.formValues.ipWhiteList)}),this.ip=null,this.dialogVisible=!1):this.$message.error("请输入 IP")},handleTagClose:function(t){var e=this;this.$confirm("确定删除IP "+this.formValues.ipWhiteList[t]+" ?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.formValues.ipWhiteList.splice(t,1),e.update({key:"ipWhiteList",value:JSON.stringify(e.formValues.ipWhiteList)})}))},update:function(t){var e=this;Object(s["g"])("configUpdate",t).then((function(t){e.$message.success("修改成功")})).catch((function(){e.$message.error("错误")}))},onfocus:function(t,e){this.tempValue=t[e]?t[e].trim():null},onblur:function(t,e,r){var a=this,n=e[r];n?(n=n.trim(),n!==this.tempValue?this.$confirm("【"+t+"】有修改, 是否提交?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.update({key:r,value:n})})).catch((function(){e[r]=a.tempValue})):e[r]=this.tempValue):e[r]=this.tempValue},memoryCompute:function(){this.memoryNumber=1024*(this.memoryIndex?this.memoryIndex:0)},javaOptionsHandleChange:function(){this.isChangeJavaOptions=!1},javaOptionsSubmit:function(){this.isChangeJavaOptions=!0,this.update({key:"javaOptions",value:JSON.stringify(this.formValues.javaOptions)})}}},l=i,u=(r("2127"),r("2877")),c=Object(u["a"])(l,a,n,!1,null,"652d8404",null);e["default"]=c.exports}}]);