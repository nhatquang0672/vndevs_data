window.__require=function e(t,n,o){function r(l,a){if(!n[l]){if(!t[l]){var u=l.split("/");if(u=u[u.length-1],!t[u]){var s="function"==typeof __require&&__require;if(!a&&s)return s(u,!0);if(i)return i(u,!0);throw new Error("Cannot find module '"+l+"'")}l=u}var c=n[l]={exports:{}};t[l][0].call(c.exports,function(e){return r(t[l][1][e]||e)},c,c.exports,e,t,n,o)}return n[l].exports}for(var i="function"==typeof __require&&__require,l=0;l<o.length;l++)r(o[l]);return r}({HuolangAndroidObject:[function(e,t,n){"use strict";cc._RF.push(t,"6a3faq9QmVIQb0eLbDcLjyo","HuolangAndroidObject");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.HuolangAndroidObject=void 0;var i=e("../../../app/game/ctrl/sdk/component/BaseSDKObject"),l=e("./component/HuolangSDKAd"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.GetAd=function(){return this.TryGetComponent(l.HuolangSDKAd)},t.__cname="HuolangAndroidObject",t}(i.BaseSDKObject);n.HuolangAndroidObject=a,cc._RF.pop()},{"../../../app/game/ctrl/sdk/component/BaseSDKObject":void 0,"./component/HuolangSDKAd":"HuolangSDKAd"}],HuolangSDKAd:[function(e,t,n){"use strict";cc._RF.push(t,"9cc55XSVL9NE5RRHESX+PvI","HuolangSDKAd");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function l(e){try{u(o.next(e))}catch(t){i(t)}}function a(e){try{u(o.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(l,a)}u((o=o.apply(e,t||[])).next())})},l=this&&this.__generator||function(e,t){var n,o,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(e){return function(t){return u([e,t])}}function u(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(r=(r=l.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(a){i=[6,a],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)l.push(o.value)}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return l};Object.defineProperty(n,"__esModule",{value:!0}),n.HuolangSDKAd=void 0;var u=e("../../../../app/bridge/AppBridge"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.Advertisement=function(e){return void 0===e&&(e=null),i(this,void 0,void 0,function(){var e,t,n;return l(this,function(o){switch(o.label){case 0:return[4,this.CallOvertime(1,function(e){u.AppBridge.SDKShowAd("953117470",function(t){e([!0,t])})})];case 1:return e=a.apply(void 0,[o.sent(),2]),t=e[0],n=e[1],t?[2,n]:[2,!1]}})})},t.__cname="HuolangSDKAd",t}(e("./HuolangSDKComponent").HuolangSDKComponent);n.HuolangSDKAd=s,cc._RF.pop()},{"../../../../app/bridge/AppBridge":void 0,"./HuolangSDKComponent":"HuolangSDKComponent"}],HuolangSDKComponent:[function(e,t,n){"use strict";cc._RF.push(t,"b22f29Riw1B25aEOJDBDK8O","HuolangSDKComponent");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.HuolangSDKComponent=void 0;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.__cname="HuolangSDKComponent",t}(e("../../../../app/game/ctrl/sdk/component/BaseSDKComponent").BaseSDKComponent);n.HuolangSDKComponent=i,cc._RF.pop()},{"../../../../app/game/ctrl/sdk/component/BaseSDKComponent":void 0}],huolangSDK:[function(e,t,n){"use strict";cc._RF.push(t,"00adc+1QVhJuYjBFsSuRZGA","huolangSDK");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function l(e){try{u(o.next(e))}catch(t){i(t)}}function a(e){try{u(o.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(l,a)}u((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(e){return function(t){return u([e,t])}}function u(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(r=(r=l.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(a){i=[6,a],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},u=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)l.push(o.value)}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return l},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.HuolangSDK=void 0;var c,p=e("../../app/bridge/AppBridge"),f=e("../../app/game/ctrl/sdk/SDKInterface"),d=e("../../engine/EngineMain"),h=e("../../framework/container/Container"),g=e("../../framework/FW"),y=e("../../framework/utils/PromiseWrap"),v=e("../../framework/utils/Toolset"),_=e("./android/HuolangAndroidObject");(function(e){e.STATUS_SUCCESS="0",e.STATUS_FAILURE="-1"})(c||(c={}));var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.initAsync=function(){return l(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:if(e=h.Container.inst(),this.sdkobj=new _.HuolangAndroidObject(e),g.FW.Log.log(this.className,"SDK\u6b63\u5728\u521d\u59cb\u5316"),0!=this.GetIsInit())return[3,3];t.label=1;case 1:return 0!=this.GetIsInit()?[3,3]:[4,g.FW.Task.delay(1e3)];case 2:return t.sent(),[3,1];case 3:return g.FW.Log.log(this.className,"SDK\u521d\u59cb\u5316\u5b8c\u6210"),[2]}})})},t.prototype.GetIsInit=function(){return p.AppBridge.GetSDKInited()},t.prototype.init=function(){this.toolSet=v.ToolSet.createToolSet()},t.prototype.onDestroy=function(){v.ToolSet.destroyToolSet(this.toolSet)},t.prototype.login=function(){var e=this,t=new y.PromiseWrap;return p.AppBridge.SDKLogin('""',function(n,o){if(n){var r=JSON.parse(o);e.LqLoginResult=r;var i={code:r.loginResult.uid,time:parseInt(r.loginResult.time),token:r.loginResult.token};g.FW.Log.log("userInfo",JSON.stringify(i)),t.resolve([!0,i])}else console.log("fff","\u767b\u5f55\u5931\u8d25"),t.resolve([!1,null])}),t.promise},t.prototype.loginOrRegist=function(){return l(this,void 0,Promise,function(){var e,t,n,o,r;return a(this,function(i){switch(i.label){case 0:e=d.EngineMain.readLocalStorage("account_num"),t=d.EngineMain.readLocalStorage("password_num"),o=function(){var o,i;return a(this,function(l){switch(l.label){case 0:return o=!0,(i=r.login(e,t))&&i.then(function(e){var t=u(e,2),r=t[0],i=t[1];g.FW.Log.log("\u767b\u5f55:"+r),g.FW.Log.log(JSON.stringify(i)),r&&i&&(n=i),o=!1}).catch(function(e){e&&g.FW.Log.error(e),o=!1}),[4,g.FW.Task.waitUntil(function(){return 0==o})];case 1:return l.sent(),null!=n?[3,3]:[4,g.FW.Task.delay(1e3)];case 2:return l.sent(),[3,4];case 3:return[2,"break"];case 4:return[2]}})},r=this,i.label=1;case 1:return null!=n?[3,3]:[5,o()];case 2:return"break"===i.sent()?[3,3]:[3,1];case 3:return[2,n]}})})},t.prototype.logOut=function(){return l(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return p.AppBridge.SDKHasLogout()?(e=!1,p.AppBridge.SDKLogout(function(){e=!0}),[4,g.FW.Task.waitUntil(function(){return 1==e})]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.getServerAddress=function(e,t,n,o){return l(this,void 0,Promise,function(){var r,i,l,u,s,c;return a(this,function(a){switch(a.label){case 0:return(r=[]).push("platform="+e),r.push("code="+t),r.push("serverSign="+n),r.push("timestamp="+o),r.push("isWss="+(this.AppCustomData.isWss?1:0)),i=this.LqLoginResult.loginResult,r.push("plat_user_name="+i.username),r.push("uid="+i.uid),r.push("time="+i.time),r.push("ticket="+i.sign),r.push("game_id=505"),l=r.join("&"),u=this.ModelMgr.ModelPublicData.getServerAddressUrl(),s=u+"?"+l,g.FW.Log.log(s),[4,g.FW.Http.get(s,null,null,!0)];case 1:return(c=a.sent()).result?[2,c.content]:[2,null]}})})},t.prototype.PPP=function(e,t,n){return l(this,void 0,Promise,function(){var o,r,i,l,u,f,d,h,v,_,m,S,b,w,A,D,R,O,K,M,L,j,k,F,P,H,C,T,W,I,B,x,G=this;return a(this,function(a){switch(a.label){case 0:return this.payPromise?(g.FW.Log.log("\u4e0a\u6b21\u652f\u4ed8\u8fd8\u672a\u5b8c\u6210\uff0c\u8bf7\u7a0d\u7b49"),[2]):null==this.LqLoginResult?(g.FW.Log.log("\u672a\u767b\u5f55\uff0c\u65e0\u6cd5\u652f\u4ed8"),[2]):0==p.AppBridge.SDKHasPay()?(g.FW.Log.log("sdk\u672a\u5f00\u653e\u652f\u4ed8"),[2]):(o=new y.PromiseWrap,this.payPromise=o.promise,o.then(function(){G.payPromise=null}).catch(function(){G.payPromise=null}),r=this.ModelMgr.ModelMall.GetGoodByFromId(n),i=this.ModelMgr.ModelMall.GetPayChannelByKey(r.key),this.ModelMgr.ModelVO.VORoleBag.GetOne(),l=this.LqLoginResult.loginResult.uid.toString(),u=this.ModelMgr.ModelAccount.getRoleInfo(),f=u.serverAddress.id.toString(),d=u.serverAddress.name,h=this.ModelMgr.ModelRole.GetRole(),v=h.GetRoleId().toString(),_=h.GetName(),m=h.GetLevel(),(S={}).propsId=""+e,S.money=Math.ceil(i.rmb),S.item_desc=i.name,S.ext=null,S.title="\u5145\u503c",S.role_id=v,S.role_name=_,S.s_id=f,S.s_name=d,b={code:l,roleId:parseInt(v),platform:this.AppCustomData.channelCode,payChannelId:e,fromType:t,fromId:n},w=this.ModelMgr.ModelPublicData.getPayUrl(),A=g.FW.Http.get(w,b,null,!0),D=!1,A.then(function(e){e.result&&(S.ext=e.orderCode),D=!0}),[4,g.FW.Task.waitUntil(function(){return D})]);case 1:return a.sent(),null==S.ext&&(g.FW.Log.log("\u8ba2\u5355\u53f7\u4e3a\u7a7a"),o.reject()),R=null,O=null,p.AppBridge.SDKPay(JSON.stringify(S),function(e,t){g.FW.Log.log("\u652f\u4ed8\u7ed3\u679c:"+e+","+t),R=e,O=t}),K=null,M=p.AppBridge.AddEventListener(p.AppBridgeEvent.OnResume,function(){var e=cc.director.getTotalTime();K=e+1e3},this),[4,g.FW.Task.waitUntil(function(){return null!=R||null!=K&&(cc.director.getTotalTime()>K?(g.FW.Log.log("\u652f\u4ed8\u8d85\u65f6"),R=!1,!0):void 0)})];case 2:if(a.sent(),p.AppBridge.RemoveEventListener(M),g.FW.ZJJ.log("SDKPay reslult: "+O),R&&(L=O.match(/\[(.+)\]/)).length>1){j=L[1],k=void 0,k={};try{for(F=s(j.split(",")),P=F.next();!P.done;P=F.next())H=P.value,C=H.split("="),T=C[0].trim(),W=C[1].trim(),k[T]=W}catch(E){B={error:E}}finally{try{P&&!P.done&&(x=F.return)&&x.call(F)}finally{if(B)throw B.error}}if(I=k,g.FW.ZJJ.log("SDKPay payResult: ",JSON.stringify(k)),I.StatusCode==c.STATUS_SUCCESS)return this.ReportEvent({type:"user_pay",s_id:f,s_name:d,role_id:v,role_name:_,role_level:""+m,count:I.money}),[2]}return o.resolve(S.ext),[2]}})})},t.prototype.CheckCanShare=function(){return!1},t.prototype.Share=function(){return null},t.prototype.Advertisement=function(e){return void 0===e&&(e=null),l(this,void 0,void 0,function(){return a(this,function(){return[2,this.sdkobj.GetAd().Advertisement(e)]})})},t.prototype.ReportEvent=function(e){var t=JSON.stringify(e);p.AppBridge.ReportTrackEventByJson(t)},t.prototype.submitDataUserInfo=function(e){var t=this.ModelMgr.ModelAccount.getRoleInfo(),n=t.serverAddress.id.toString(),o=t.serverAddress.name,r=this.ModelMgr.ModelRole.GetRole(),i=r.GetRoleId().toString(),l=r.GetName(),a=r.GetLevel();switch(e){case f.SubmitDataUserInfoType.createRole:this.ReportEvent({type:"create_role",s_id:n,s_name:o,role_id:i,role_name:l,role_level:""+a});break;case f.SubmitDataUserInfoType.enterGame:var u=this.LqLoginResult.loginResult.uid,s=this.LqLoginResult.loginResult.username,c=this.ModelRole.GetRole().GetLevel();this.ReportEvent({type:"role_enter_game",s_id:n,s_name:o,role_id:u,role_name:s,role_level:""+c});break;case f.SubmitDataUserInfoType.leveup:var p=this.LqLoginResult.loginResult.uid,d=this.LqLoginResult.loginResult.username,h=this.ModelRole.GetRole().GetLevel();this.ReportEvent({type:"role_level_up",s_id:n,s_name:o,role_id:p,role_name:d,role_level:""+h})}},t.prototype.HasADVideo=function(){return!0},t.__cname="huolangSDK",i([h.injectField("ModelRole")],t.prototype,"ModelRole",void 0),i([h.injectField("ModelMgr")],t.prototype,"ModelMgr",void 0),i([h.injectField("AppCustomData")],t.prototype,"AppCustomData",void 0),t}(f.SDKInterface);n.HuolangSDK=m,cc._RF.pop()},{"../../app/bridge/AppBridge":void 0,"../../app/game/ctrl/sdk/SDKInterface":void 0,"../../engine/EngineMain":void 0,"../../framework/FW":void 0,"../../framework/container/Container":void 0,"../../framework/utils/PromiseWrap":void 0,"../../framework/utils/Toolset":void 0,"./android/HuolangAndroidObject":"HuolangAndroidObject"}]},{},["HuolangAndroidObject","HuolangSDKAd","HuolangSDKComponent","huolangSDK"]);